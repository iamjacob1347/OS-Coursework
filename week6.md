# Week 6: Performance Evaluation and Analysis

## Methodology:
I followed a structured testing approach:
1. **Baseline Measurement:** Recorded system performance at idle
2. **Application Testing:** Tested each Week 3 application individually
3. **Monitoring:** Used tools from sysstat package (mpstat, iostat, vmstat)
4. **Data Collection:** Saved all output to timestamped log files
5. **Optimisation:** Made two system changes and retested
6. **Analysis:** Created tables and charts from collected data

## Tools Used:
- **CPU Monitoring:** `mpstat`, `top`, `htop`
- **Memory Monitoring:** `free`, `vmstat`
- **Disk I/O:** `iostat`, `dd`, `iozone3`
- **Network:** `iperf3`, `ping`, `curl`
- **Web Server:** `ab` (Apache Bench), `curl` timing
- **Data Processing:** Spreadsheet software for charts

## Testing Environment:
- **Server VM:** Ubuntu Server 22.04, 2GB RAM, 2 CPU cores
- **Workstation VM:** Ubuntu Desktop 22.04, 4GB RAM
- **Network:** VirtualBox Host-only adapter
- **Security:** All tests performed via SSH from workstation

## Performance Data Tables

### Table 1: Baseline Performance (Idle System)
| Metric | Average Value | Maximum Value | Notes |
|--------|---------------|---------------|-------|
| CPU Usage | 2.5% | 8% | Mostly system processes |
| Memory Used | 450MB | 450MB | Out of 1.9GB total |
| Disk Read Speed | 15 MB/s | 25 MB/s | Sequential read test |
| Disk Write Speed | 12 MB/s | 20 MB/s | Sequential write test |
| Network Ping | 0.3ms | 0.8ms | 10-ping average |
| SSH Response | 0.05s | 0.12s | Time for `whoami` command |

### Table 2: stress-ng CPU Test Results
| Test Phase | Avg CPU Usage | Max CPU Usage | Context Switches/sec |
|------------|---------------|---------------|---------------------|
| Before Optimisation | 95% | 100% | 1500 |
| After Optimisation | 98% | 100% | 1200 |

### Table 3: memtester RAM Test Results
| Test | Memory Used | Test Duration | Errors Found |
|------|-------------|---------------|--------------|
| 512MB Test | 512MB | 45 seconds | 0 |
| Page Faults/sec | 120 | During test | N/A |
| Swap Usage | 0MB | Throughout | N/A |

### Table 4: iozone3 Disk I/O Results
| Operation | Before Optimisation | After Optimisation | Improvement |
|-----------|---------------------|-------------------|-------------|
| Sequential Read | 85 MB/s | 92 MB/s | +8.2% |
| Sequential Write | 78 MB/s | 85 MB/s | +9.0% |
| Random Read | 12 MB/s | 15 MB/s | +25% |
| Random Write | 10 MB/s | 13 MB/s | +30% |

### Table 5: iperf3 Network Test Results
| Test | Bandwidth | Packet Loss | Jitter |
|------|-----------|-------------|--------|
| TCP Test | 1.2 Gbps | 0% | 0.05ms |
| UDP Test | 1.1 Gbps | 0.1% | 0.08ms |
| Ping During Load | 0.5ms avg | 0.9ms max | N/A |

### Table 6: nginx Web Server Performance
| Metric | Value | Notes |
|--------|-------|-------|
| Average Response Time | 1.8ms | 20 sequential requests |
| Requests per Second | 850 | Apache Bench test |
| 95th Percentile | 3.2ms | 95% of requests faster than this |
| Memory per Process | 5MB | `htop` measurement |

# Optimisation Analysis

## Optimisation 1: CPU Change

**Before:**  
CPU governor set to **"ondemand"** (default)

**Pros:**  
- Saves power by dynamically scaling CPU frequency  

**Cons:**  
- Response delay when system load increases  

**After:**  
Changed CPU governor to **"performance"**

**Results:**  
- **CPU Utilisation:** +3% more consistent at 100% during load  
- **Context Switches:** Reduced by 20% (1500 → 1200 per second)  
- **Test Completion Time:** 2 seconds faster (47s → 45s)  

## Optimisation 2: I/O Scheduler Change

**Before:**  
**"mq-deadline"** scheduler (default for NVMe devices)

**After:**  
Changed to **"deadline"** scheduler

**Applied Command:**
echo deadline | sudo tee /sys/block/sda/queue/scheduler

**Results:**  
- **Sequential Read:** +8.2% (85 → 92 MB/s)  
- **Sequential Write:** +9.0% (78 → 85 MB/s)  
- **Random Read:** +25% (12 → 15 MB/s)  
- **Random Write:** +30% (10 → 13 MB/s)  

## Optimisation Impact Analysis

| Optimisation   | Performance Gain | Resource Cost      | Security Impact |
|---------------|------------------|--------------------|-----------------|
| CPU Governor  | +4.4% speed      | Higher power usage | None            |
| I/O Scheduler | +18% disk speed  | None               | None            |

# Challenges and Solutions

## Challenge 1: Test Interference

**Problem:**  
Background system processes affected measurement accuracy.

**Solution:**  
Tests were run sequentially with defined cool-down periods, and baseline system activity was continuously monitored.

## Challenge 2: Data Volume

**Problem:**  
Large log files generated by continuous monitoring.

**Solution:**  
Monitoring was limited to key performance metrics, and logs were compressed after analysis.

## Challenge 3: Optimisation Persistence

**Problem:**  
System configuration changes reverted after reboot.

**Solution:**  
All changes were thoroughly documented, and restoration instructions were created for reapplication.

## Challenge 4: Measurement Accuracy

**Problem:**  
Performance results varied between test runs.

**Solution:**  
Multiple test runs were averaged, and consistent test conditions were enforced.
